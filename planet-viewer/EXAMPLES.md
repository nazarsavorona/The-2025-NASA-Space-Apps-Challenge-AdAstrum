# Planet Viewer - Usage Examples

Complete examples showing different ways to use the PlanetViewer component.

## Example 1: Minimal Setup

```html
<!DOCTYPE html>
<html>
<head>
    <title>Minimal Planet Viewer</title>
    <style>
        body { margin: 0; }
        #container { width: 100vw; height: 100vh; }
    </style>
</head>
<body>
    <div id="container"></div>
    <script type="module">
        import { PlanetViewer } from './src/components/PlanetViewer.js';
        
        new PlanetViewer({
            container: document.getElementById('container'),
            planetData: {
                name: 'Earth',
                radius: 6,
                color: 0x4169e1
            }
        });
    </script>
</body>
</html>
```

## Example 2: Load DreamFusion Model

```javascript
import { PlanetViewer } from './components/PlanetViewer.js';

// Load a 3D model generated by DreamFusion
const viewer = new PlanetViewer({
    container: document.getElementById('planet-container'),
    planetData: {
        name: 'Kepler-186f',
        radius: 5,
        modelUrl: 'http://localhost:8000/models/kepler-186f.glb'
    },
    options: {
        autoRotate: true,
        showStars: true,
        cameraDistance: 20
    }
});

console.log('Model loaded!');
```

## Example 3: Planet with Multiple Moons

```javascript
import { PlanetViewer } from './components/PlanetViewer.js';

const viewer = new PlanetViewer({
    container: document.getElementById('planet-container'),
    planetData: {
        name: 'Jupiter',
        radius: 25,
        color: 0xdaa520,
        moons: [
            {
                name: 'Io',
                size: 1.8,
                distance: 30,
                speed: 1.5,
                color: 0xffff00
            },
            {
                name: 'Europa',
                size: 1.5,
                distance: 35,
                speed: 1.2,
                color: 0xffffff
            },
            {
                name: 'Ganymede',
                size: 2.6,
                distance: 40,
                speed: 1.0,
                color: 0xcccccc
            },
            {
                name: 'Callisto',
                size: 2.4,
                distance: 45,
                speed: 0.8,
                color: 0x8b7355
            }
        ]
    }
});
```

## Example 4: Planet with Rings (Saturn)

```javascript
import { PlanetViewer } from './components/PlanetViewer.js';

const viewer = new PlanetViewer({
    container: document.getElementById('planet-container'),
    planetData: {
        name: 'Saturn',
        radius: 21,
        color: 0xfad5a5,
        hasRings: true,
        ringColor: 0xd4a373,
        moons: [
            {
                name: 'Titan',
                size: 2.5,
                distance: 35,
                speed: 0.8,
                color: 0xffa500
            }
        ]
    }
});
```

## Example 5: Earth with Atmosphere

```javascript
import { PlanetViewer } from './components/PlanetViewer.js';

const viewer = new PlanetViewer({
    container: document.getElementById('planet-container'),
    planetData: {
        name: 'Earth',
        radius: 6.3,
        color: 0x4169e1,
        hasAtmosphere: true,
        atmosphereColor: 0x4169e1,
        moons: [
            {
                name: 'Moon',
                size: 1.7,
                distance: 10,
                speed: 1.0,
                color: 0xaaaaaa
            }
        ]
    },
    options: {
        autoRotate: true,
        showStars: true,
        cameraDistance: 15
    }
});
```

## Example 6: Interactive Planet Selector

```javascript
import { PlanetViewer } from './components/PlanetViewer.js';

const planets = {
    earth: {
        name: 'Earth',
        radius: 6.3,
        color: 0x4169e1,
        hasAtmosphere: true
    },
    mars: {
        name: 'Mars',
        radius: 3.4,
        color: 0xcd5c5c
    },
    jupiter: {
        name: 'Jupiter',
        radius: 25,
        color: 0xdaa520
    }
};

let currentViewer = null;

function loadPlanet(planetKey) {
    // Dispose previous viewer
    if (currentViewer) {
        currentViewer.dispose();
    }
    
    // Create new viewer
    currentViewer = new PlanetViewer({
        container: document.getElementById('planet-container'),
        planetData: planets[planetKey]
    });
}

// Initial load
loadPlanet('earth');

// HTML buttons
// <button onclick="loadPlanet('earth')">Earth</button>
// <button onclick="loadPlanet('mars')">Mars</button>
// <button onclick="loadPlanet('jupiter')">Jupiter</button>
```

## Example 7: Dynamic Model Switching

```javascript
import { PlanetViewer } from './components/PlanetViewer.js';

const viewer = new PlanetViewer({
    container: document.getElementById('planet-container'),
    planetData: {
        name: 'Initial Planet',
        radius: 5,
        color: 0x888888
    }
});

// Function to switch models
async function switchModel(modelUrl, planetName) {
    await viewer.updatePlanet({
        name: planetName,
        radius: 5,
        modelUrl: modelUrl
    });
}

// Usage
document.getElementById('model1-btn').addEventListener('click', () => {
    switchModel('http://localhost:8000/models/planet1.glb', 'Planet 1');
});

document.getElementById('model2-btn').addEventListener('click', () => {
    switchModel('http://localhost:8000/models/planet2.glb', 'Planet 2');
});
```

## Example 8: Control Rotation and Camera

```javascript
import { PlanetViewer } from './components/PlanetViewer.js';

const viewer = new PlanetViewer({
    container: document.getElementById('planet-container'),
    planetData: {
        name: 'Mars',
        radius: 3.4,
        color: 0xcd5c5c
    }
});

// Toggle rotation
document.getElementById('toggle-rotation').addEventListener('click', () => {
    const isRotating = viewer.options.autoRotate;
    viewer.setAutoRotate(!isRotating);
});

// Reset camera
document.getElementById('reset-camera').addEventListener('click', () => {
    viewer.setCameraPosition(0, 5, 15);
});

// Take screenshot
document.getElementById('screenshot').addEventListener('click', () => {
    const imageData = viewer.takeScreenshot();
    
    // Download image
    const link = document.createElement('a');
    link.href = imageData;
    link.download = 'planet-screenshot.png';
    link.click();
});
```

## Example 9: Fetch Models from Backend

```javascript
import { PlanetViewer } from './components/PlanetViewer.js';

const API_URL = 'http://localhost:8000';
let viewer = null;

// Fetch available models from backend
async function loadModelsFromBackend() {
    try {
        const response = await fetch(`${API_URL}/models`);
        const models = await response.json();
        
        // Display models in UI
        const modelList = document.getElementById('model-list');
        models.forEach(model => {
            const button = document.createElement('button');
            button.textContent = model.name;
            button.onclick = () => loadModel(model.url);
            modelList.appendChild(button);
        });
    } catch (error) {
        console.error('Failed to load models:', error);
    }
}

// Load specific model
async function loadModel(modelUrl) {
    if (viewer) {
        viewer.dispose();
    }
    
    viewer = new PlanetViewer({
        container: document.getElementById('planet-container'),
        planetData: {
            name: 'Loaded Model',
            radius: 5,
            modelUrl: `${API_URL}${modelUrl}`
        }
    });
}

// Initialize
loadModelsFromBackend();
```

## Example 10: React Component

```jsx
import React, { useEffect, useRef, useState } from 'react';
import { PlanetViewer } from './components/PlanetViewer';

function PlanetViewerComponent() {
    const containerRef = useRef(null);
    const viewerRef = useRef(null);
    const [selectedPlanet, setSelectedPlanet] = useState('earth');

    const planets = {
        earth: { name: 'Earth', radius: 6.3, color: 0x4169e1, hasAtmosphere: true },
        mars: { name: 'Mars', radius: 3.4, color: 0xcd5c5c },
        jupiter: { name: 'Jupiter', radius: 25, color: 0xdaa520 }
    };

    useEffect(() => {
        if (containerRef.current && !viewerRef.current) {
            viewerRef.current = new PlanetViewer({
                container: containerRef.current,
                planetData: planets[selectedPlanet]
            });
        }

        return () => {
            if (viewerRef.current) {
                viewerRef.current.dispose();
                viewerRef.current = null;
            }
        };
    }, []);

    useEffect(() => {
        if (viewerRef.current) {
            viewerRef.current.updatePlanet(planets[selectedPlanet]);
        }
    }, [selectedPlanet]);

    return (
        <div>
            <div ref={containerRef} style={{ width: '100%', height: '80vh' }} />
            <div style={{ padding: '20px' }}>
                <button onClick={() => setSelectedPlanet('earth')}>Earth</button>
                <button onClick={() => setSelectedPlanet('mars')}>Mars</button>
                <button onClick={() => setSelectedPlanet('jupiter')}>Jupiter</button>
            </div>
        </div>
    );
}

export default PlanetViewerComponent;
```

## Example 11: Load Texture from URL

```javascript
import { PlanetViewer } from './components/PlanetViewer.js';

const viewer = new PlanetViewer({
    container: document.getElementById('planet-container'),
    planetData: {
        name: 'Earth',
        radius: 6.3,
        textureUrl: 'https://example.com/textures/earth.jpg',
        hasAtmosphere: true
    }
});
```

## Example 12: Custom Configuration

```javascript
import { PlanetViewer } from './components/PlanetViewer.js';

const viewer = new PlanetViewer({
    container: document.getElementById('planet-container'),
    planetData: {
        name: 'Custom Planet',
        radius: 10,
        color: 0xff6b6b,
        hasAtmosphere: true,
        atmosphereColor: 0xff0000,
        hasRings: true,
        ringColor: 0xffd700
    },
    options: {
        autoRotate: false,
        showStars: false,
        enableControls: true,
        backgroundColor: 0x111111,
        cameraDistance: 25
    }
});

// Later, change settings
viewer.setAutoRotate(true);
viewer.setCameraPosition(0, 10, 30);
```

## Example 13: Multiple Viewers (Gallery)

```javascript
import { PlanetViewer } from './components/PlanetViewer.js';

const planets = [
    { name: 'Mercury', radius: 2.4, color: 0x8c7853 },
    { name: 'Venus', radius: 6.0, color: 0xffc649 },
    { name: 'Earth', radius: 6.3, color: 0x4169e1 },
    { name: 'Mars', radius: 3.4, color: 0xcd5c5c }
];

const viewers = [];

planets.forEach((planetData, index) => {
    const container = document.getElementById(`planet-${index}`);
    const viewer = new PlanetViewer({
        container: container,
        planetData: planetData,
        options: {
            autoRotate: true,
            showStars: false,
            cameraDistance: 10
        }
    });
    viewers.push(viewer);
});

// Clean up all viewers when done
function disposeAll() {
    viewers.forEach(viewer => viewer.dispose());
}
```

## Example 14: With Loading State

```javascript
import { PlanetViewer } from './components/PlanetViewer.js';

const container = document.getElementById('planet-container');
const loading = document.getElementById('loading');

// Show loading
loading.style.display = 'block';

const viewer = new PlanetViewer({
    container: container,
    planetData: {
        name: 'Exoplanet',
        radius: 5,
        modelUrl: 'http://localhost:8000/models/large-model.glb'
    }
});

// Hide loading when ready (give it a moment for model to load)
setTimeout(() => {
    loading.style.display = 'none';
}, 2000);
```

## Example 15: Error Handling

```javascript
import { PlanetViewer } from './components/PlanetViewer.js';

async function loadPlanetSafely(modelUrl) {
    try {
        const viewer = new PlanetViewer({
            container: document.getElementById('planet-container'),
            planetData: {
                name: 'Test Planet',
                radius: 5,
                modelUrl: modelUrl
            }
        });
        
        console.log('Planet loaded successfully!');
        return viewer;
        
    } catch (error) {
        console.error('Failed to load planet:', error);
        
        // Fallback to colored sphere
        const fallbackViewer = new PlanetViewer({
            container: document.getElementById('planet-container'),
            planetData: {
                name: 'Fallback Planet',
                radius: 5,
                color: 0x888888
            }
        });
        
        return fallbackViewer;
    }
}

// Usage
loadPlanetSafely('http://localhost:8000/models/planet.glb');
```

---

## Tips

1. **Always dispose viewers** when removing them from the DOM
2. **Use GLTF/GLB format** for best compatibility and performance
3. **Keep model file sizes under 10MB** for good loading times
4. **Test on different devices** to ensure performance
5. **Use loading states** for better user experience

For more examples, see the full application in `index.html` and `src/main.js`.
